---
nav_title: AIアイテムのおすすめ
article_title: AIアイテムのおすすめ
page_order: 15
alias: "/ai_item_recommendations/"
description: "このリファレンス記事では、カタログ内のアイテムに対するAIアイテム推薦の作成方法について説明します。"
---

# AIアイテムのおすすめ

> カタログ内のアイテムに対するAIアイテム推薦の作成方法を学びます。

AIアイテムの推奨を使用して、最も人気のある製品を計算したり、特定の[カタログ]({{site.baseurl}}/user_guide/personalization_and_dynamic_content/catalogs/)のためにパーソナライズされたAI推奨を作成したりできます。レコメンデーションを作成した後、パーソナライゼーションを使用してそれらの製品をメッセージに挿入できます。

## 前提条件

- 少なくとも1つの\[カタログ]\[カタログ]を使用して、以下に説明する推奨タイプのいずれかを使用する必要があります。
- Braze（カスタムイベントまたは購入オブジェクト）に購入またはイベントデータがあり、カタログに保存されている一意の製品IDへの参照が含まれている必要があります。
- AIパーソナライズされた推奨事項は、数百または数千のアイテムで最も効果的に機能し、通常、購入またはインタラクションデータを持つ少なくとも30,000人のユーザーが必要です。これはあくまで大まかなガイドであり、変動する可能性があります。他の推奨タイプは、より少ないデータで動作できます。

## AIアイテム推薦の作成

アイテムの推薦を作成するには:

1. **分析** > **AIアイテム推薦**に移動します。
2. **Create 予測** > **AI アイテム推薦**。

個々のカタログから直接推奨を作成することもできます。**カタログ** ページからカタログを選択し、**おすすめを作成** をクリックします。

### ステップ 1:推奨事項の詳細を追加

まず、あなたの推薦に名前とオプションの説明を付けてください。

![][1]

### ステップ 2:あなたの推薦を定義する {#recommendation-type}

次に、推奨タイプを選択します。すべての推奨タイプは、過去6か月間のアイテムインタラクション（購入またはカスタムイベント）データを使用します。以下に記載されているインタラクションは、購入イベントまたはステップ3で選択されたカスタムイベントを指します。

- **最も人気があります:**カタログ内のすべてのユーザーが最も頻繁に操作する最大30個のアイテムを計算します。例えば、最も購入された製品などです。
- **最新:**ユーザーが最近最も多くやり取りした最大30製品のリストを作成します。
- **AIパーソナライズされた:**トランスフォーマーという新しい種類の深層学習を使用して、各ユーザーが次に操作する可能性が最も高いアイテムのセットを予測します。次に最も可能性の高いアイテムを最も可能性の高い順に最大30個まで計算します。このタイプの推奨は、他のBraze顧客のデータとあなたのデータを組み合わせるために大規模言語モデル（LLM）を使用しません。

{% alert tip %}
**最新**または**AIパーソナライズされた**を使用する場合、個別の推奨を作成するためのデータが不十分なユーザーは、フォールバックとして**最も人気のある**アイテムを受け取ります。ユーザーの割合が**最も人気のある**フォールバックを受け取っていることが**分析**ページに表示されます。
{% endalert %}

#### ステップ 2a: 以前の購入またはやり取りを除外する（オプション）

ユーザーがすでに購入または操作したアイテムを提案しないようにするには、**ユーザーが以前に操作したアイテムを推奨しない**を選択してください。このオプションは、推奨**タイプ**が**AIパーソナライズされた**に設定されている場合にのみ利用可能です。

![]\[2-3]

この設定により、ユーザーが既に購入または操作したアイテムが、最近推奨が更新された場合にメッセージに再表示されないようにします。推奨の更新間に購入または操作されたアイテムは、まだ表示される場合があります。アイテム推薦の無料版では、更新は毎週行われます。AIアイテム推奨のプロバージョンでは、更新は24時間ごとに行われます。

例えば、AIアイテム推薦のプロバージョンを使用する場合、ユーザーが何かを購入し、その後30分以内にマーケティングメールを受け取ると、購入したばかりのアイテムがメールから除外されない可能性があります。ただし、24時間後に送信されたメッセージにはそのアイテムは含まれません。

#### ステップ 2b: カタログを選択

まだ入力されていない場合は、この推奨事項がアイテムを取得する \[カタログ]\[カタログ] を選択します。

#### ステップ 2c: 選択を追加（オプション）

推奨事項をさらに制御したい場合は、[選択]({{site.baseurl}}/user_guide/personalization_and_dynamic_content/catalogs/selections/)を選択してカスタムフィルタを適用します。選択は、カタログ内の特定の列（ブランド、サイズ、場所など）によってフィルター推奨を行います。Liquid を含む選択は、あなたの推薦に使用できません。

![]\[2-2]

{% alert tip %}
選択が見つからない場合は、まずカタログに設定されていることを確認してください。
{% endalert %}

### ステップ 3:推奨事項を推進するためのインタラクションを選択

次に、この推奨事項を最適化するイベントを選択します。このイベントは通常購入ですが、アイテムとのやり取りである場合もあります。

最適化できます:

- [購入オブジェクト]({{site.baseurl}}/api/objects_filters/purchase_object/)でイベントを購入する
- 購入を表すカスタムイベント
- カスタムイベントは、他のアイテムのインタラクション（製品の閲覧、クリック、メディアの再生など）を表します。

**カスタムイベント**を選択した場合、リストからイベントを選択してください。

![][3]

### ステップ 4:対応するプロパティ名{#property-name}を選択してください

レコメンデーションを作成するには、Braze に対して、インタラクションイベント（購入オブジェクトまたはカスタムイベント）のどのフィールドにアイテムのカタログ内の`id`フィールドと一致する一意の識別子があるかを伝える必要があります。わからない？[要件を表示](#requirements).

このフィールドを**プロパティ名**に選択します。

**プロパティ名**フィールドは、SDKを通じてBrazeに送信されたフィールドのリストで事前に入力されます。十分なデータが提供されれば、これらのプロパティも正しいプロパティである確率の順にランク付けされます。カタログの`id`フィールドに対応するものを選択してください。

![][4]

#### 要件 {#requirements}

プロパティを選択するためのいくつかの要件があります：

- 選択したカタログの`id`フィールドにマップする必要があります。
- **購入オブジェクトを選択した場合:**`product_id` またはインタラクションイベントの`properties`のフィールドである必要があります。
- **カスタムイベントを選択した場合:**`properties`のカスタムイベントのフィールドである必要があります。
- ネストされたフィールドは、**プロパティ名** ドロップダウンにドット表記で `event_property.nested_property` の形式で入力する必要があります。例えば、イベントプロパティ`location`内のネストされたプロパティ`district_name`を選択する場合、`location.district_name`を入力します。
- フィールドは、（単一のイベント内の複数のカタログアイテムの）配列に含まれることがあります。それは自動的に平坦化されます。

#### 例のマッピング

次の例のマッピングはどちらもこのサンプルカタログを参照しています:

<style type="text/css">
.tg td{word-break:normal;}
.tg th{word-break:normal;font-size: 14px; font-weight: bold; background-color: #f4f4f7; text-transform: lowercase; color: #212123; font-family: "Sailec W00 Bold",Arial,Helvetica,sans-serif;}
.tg .tg-0pky{border-color:inherit;text-align:left;vertical-align:top;word-break:normal}
</style>
<table class="tg">
<thead>
  <tr>
    <th class="tg-0pky">id</th>
    <th class="tg-0pky">タイトル</th>
    <th class="tg-0pky">価格</th>
  </tr>
</thead>
<tbody>
  <tr>
    <td class="tg-0pky">ADI-BL-7</td>
    <td class="tg-0pky">アディダス ブラック サイズ 7</td>
    <td class="tg-0pky">100.00米ドル</td>
  </tr>
  <tr>
    <td class="tg-0pky">ADI-RD-8</td>
    <td class="tg-0pky">アディダス レッド サイズ 8</td>
    <td class="tg-0pky">100.00米ドル</td>
  </tr>
  <tr>
    <td class="tg-0pky">ADI-WH-9</td>
    <td class="tg-0pky">アディダス ホワイト サイズ 9</td>
    <td class="tg-0pky">100.00米ドル</td>
  </tr>
  <tr>
    <td class="tg-0pky">ADI-PP-10</td>
    <td class="tg-0pky">アディダス パープル サイズ 10</td>
    <td class="tg-0pky">75.00米ドル</td>
  </tr>
</tbody>
</table>

{% tabs %}
{% tab カスタムイベント %}

たとえば、顧客がチェックアウトする前に類似商品を推薦できるように、カスタムイベント`added_to_cart`を使用したいとします。イベント`added_to_cart`には`product_sku`のイベントプロパティがあります。

次に、`product_sku`プロパティには、サンプルカタログの`id`列の値のうち少なくとも1つを含める必要があります。「ADI-BL-7」、「ADI-RD-8」、「ADI-WH-9」、または「ADI-PP-10」。すべてのカタログアイテムにイベントが必要なわけではありませんが、レコメンデーションエンジンが動作するための十分なコンテンツを持つためには、いくつかのイベントが必要です。

##### カスタムイベントオブジェクトの例

このイベントには`"product_sku": "ADI-BL-7"`があり、サンプルカタログの最初のアイテムに一致します。

```json
{
  "events" : [
    {
      "external_id" : "user1",
      "app_id" : "your-app-id",
      "name" : "added_to_cart",
      "time" : "2024-07-16T19:20:30+01:00",
      "properties" : {
        "product_sku": "ADI-BL-7"
      }
    }
  ]
}
```

{% endtab %}
{% tab 購入オブジェクト %}

購入オブジェクトは、購入が行われたときにAPIを通じて渡されます。

マッピングに関しては、カスタムイベントと同様のロジックが購入オブジェクトにも適用されますが、購入オブジェクトの`product_id`または`properties`オブジェクトのフィールドを使用するかを選択できます。

覚えておいてください、すべてのカタログアイテムにイベントが必要なわけではありませんが、レコメンデーションエンジンが作業するのに十分なコンテンツを持つためには、いくつかのイベントが必要です。

##### 製品IDにマッピングされた購入オブジェクトの例

このイベントには`"product_id": "ADI-BL-7`があり、カタログの最初の項目に対応しています。

```json
{
  "purchases": [
    {
      "external_id": "user1",
      "app_id": "11ae5b4b-2445-4440-a04f-bf537764c9ad",
      "product_id": "ADI-BL-7",
      "currency": "USD",
      "price": 100.00,
      "time": "2024-07-16T19:20:30+01:00",
      "properties": {
        "color": "black",
        "checkout_duration": 180,
        "size": "7",
        "brand": "Adidas"
      }
    }
  ]
}
```

##### プロパティフィールドにマッピングされた購入オブジェクトの例

このイベントには`"sku": "ADI-RD-8"`のプロパティがあり、カタログの2番目のアイテムにマップされます。

```json
{
  "purchases": [
    {
      "external_id": "user1",
      "app_id": "11ae5b4b-2445-4440-a04f-bf537764c9ad",
      "product_id": "shoes",
      "currency": "USD",
      "price": 100.00,
      "time": "2024-07-16T19:20:30+01:00",
      "properties": {
        "sku": "ADI-RD-8",
        "color": "red",
        "checkout_duration": 180,
        "size": "8",
        "brand": "Adidas"
      }
    }
  ]
}
```

{% endtab %}
{% endtabs %}

### ステップ 5: トレーニング the recommendation

準備ができたら、**推奨事項を作成**を選択します。このプロセスは完了するまでに10分から36時間かかることがあります。推奨が正常にトレーニングされるか、作成が失敗した理由の説明があると、メール更新を受け取ります。

推奨事項は**予測**ページにあり、必要に応じて編集またはアーカイブできます。推奨事項は毎月1回自動的に再訓練されます。

## 分析

推奨事項の分析を表示して、ユーザーに推奨されたアイテムと推奨モデルの精度を確認できます。

1. **分析** > **アイテム推薦** に移動します。
2. リストからあなたの推薦を選択してください。

ページの上部には、精度やカバレッジなど、あなたの推薦に関する統計情報が表示されます。

![][5]

これらの指標は次の表で定義されています。 

| メートル法              | 説明 |
| ------------------- | ---------- |
| 精度           | モデルがユーザーが次に購入したアイテムを正しく予測した時間の割合。精度は特定のカタログのサイズとミックスに大きく依存しており、モデルがどのくらい正しいかを理解するためのガイドとして使用する必要があります。<br><br>過去のテストでは、精度が6〜20％の範囲でモデルが良好に機能することを確認しました。このメトリックは、モデルが次に再トレーニングされると更新されます。  |
| カバレッジ            | カタログ内の利用可能なアイテムのうち、少なくとも1人のユーザーに推奨される割合はどれくらいですか。最も人気のあるアイテムよりも、パーソナライズされたアイテムのおすすめで、より高いアイテムカバレッジが期待できます。 |
| 推奨タイプ | パーセンテージのユーザーがパーソナライズされたまたは最新の推奨事項を受け取るのに対し、最も人気のあるアイテムのフォールバック。フォールバックは、パーソナライズされたまたは最新の推薦を生成するのに十分なデータがないユーザーに送信されます。 |
{: .reset-td-br-1 .reset-td-br-2}

次のセクションでは、カタログ内のアイテムの内訳を示し、2つの列に分けています。

- **パーソナライズされたアイテム** または **最新のアイテム:**この列には、ユーザーに最も頻繁に推奨される順にカタログ内の各アイテムが表示されます。この列は、モデルによって各アイテムに割り当てられたユーザーの数も示しています。
- **最も人気のある商品**この列には、カタログ内の各アイテムが人気の降順でリストされています。ここでの人気度とは、ユーザーがワークスペース全体で最も頻繁に操作するカタログ内のアイテムを指します。パーソナライズされたまたは最新のものを個々のユーザーに対して計算できない場合、フォールバックとして最も人気のあるものが使用されます。

![][6]

**推奨事項の概要**には、選択した推奨事項の構成の概要が表示され、推奨事項が最後に更新された日時が含まれます。

![][7]{: style="max-width:45%" }

## メッセージングでの推奨事項の使用

![][10]{: style="max-width:30%;float:right;margin-left:15px;"}

推奨事項のトレーニングが終了したら、Liquidを使用してメッセージをパーソナライズし、そのカタログで最も人気のある製品を挿入できます。Liquidは、メッセージ作成者にあるパーソナライゼーションウィンドウで生成できます:

1. パーソナライゼーションをサポートするメッセージ作成者では、パーソナライゼーションウィンドウを開くには、<i class="fa-solid fa-circle-plus" style="color: #12aec5;" title="パーソナライゼーションを追加"></i>をクリックします。
2. **パーソナライゼーション Type**、**Item Recommendation**を選択します。
3. **アイテム推奨名**の場合は、作成したばかりの推奨を選択します。
4. 「**予測されたアイテムの数**」には、挿入したいトップ製品の数を入力してください。例えば、最も購入されたアイテムのトップ3を表示できます。
5. **表示する情報**については、各アイテムに含めるべきカタログのフィールドを選択します。これらのフィールドの各項目の値は、この推奨事項に関連付けられたカタログから取得されます。
6. **アイコンをクリックして**、メッセージ内の必要な場所にLiquidを貼り付けてください。

## AIアイテム推奨ティア

次の表は、AIアイテム推奨の無料版とプロ版の違いを説明しています:

| エリア                   | 無料版                          | プロバージョン            |
| :---------------------- | ------------------------------------- | :--------------------------------------- |
| ユーザー更新頻度<sup>1</sup>   | 毎週                                | 毎日                                    |
| モデル再訓練の頻度  | 毎月                               | 毎月                                   |
| 最大の推奨事項 | タイプごとに1つの推奨事項<sup>1</sup> | タイプごとの100の推奨事項<sup>2</sup> |

<sup>1. これは、ユーザー固有のアイテム推奨が更新される頻度です（モデルが再トレーニングされると更新されるMost Popularアイテムを除くすべてのモデル）。例えば、ユーザーがAIアイテム推薦に基づいて推奨されたアイテムを購入した場合、推奨アイテムはこの頻度</sup>に従って更新されます。
<sup>2\.利用可能な推奨タイプは、AIパーソナライズされた、最新、および最も人気があります。</sup>

## よくある質問

### 「最も人気のある」アイテムが他のモデルの推薦に混ざる原因は何ですか？

当社のレコメンデーションエンジンがリストをキュレーションする際、まず「最新」や「AIパーソナライズされた」など、選択した特定のモデルに基づいてパーソナライズされた選択を優先します。このモデルが何らかの理由で30件の推奨事項の完全なリストを埋めることができない場合、すべてのユーザーの中で最も人気のあるアイテムのいくつかが追加され、各ユーザーが常に完全な推奨事項のセットを持つようにします。

これはいくつかの特定の条件下で発生します:

- モデルは、条件に一致するアイテムが30個未満であることを見つけます。
- 該当する商品はもう利用できないか、在庫がありません。
- アイテムは現在の選択基準を満たしていない可能性があります。在庫の変更やユーザーの好みによるものかもしれません。

[1]: {% image_buster /assets/img/item_recs_1.png %}
\[2-1]: {% image_buster /assets/img/item_recs_2-1.png %}
\[2-2]: {% image_buster /assets/img/item_recs_2-2.png %}
\[2-3]: {% image_buster /assets/img/item_recs_2-3.png %}
[3]: {% image_buster /assets/img/item_recs_3.png %}
[4]: {% image_buster /assets/img/item_recs_4.png %}
[5]: {% image_buster /assets/img/item_recs_analytics_1.png %}
[6]: {% image_buster /assets/img/item_recs_analytics_2.png %}
[7]: {% image_buster /assets/img/item_recs_analytics_3.png %}
[10]: {% image_buster /assets/img/add_personalization.png %}
\[catalog]: {{site.baseurl}}/user_guide/personalization_and_dynamic_content/catalogs/
